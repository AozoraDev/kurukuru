<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="css/index.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <title>Kurukuru! by AozoraDev</title>
  
  <!-- Default settings -->
  <script type="text/javascript" charset="utf-8">
      const defaultSettings = [
          {
              kurukuru: true,
              kururin: true,
              randomize: false
          }
      ];
      
      if (localStorage.getItem("settings")) {
          const userSettings = JSON.parse(localStorage.getItem("settings"));
          window.settings = userSettings;
      } else {
          localStorage.setItem("settings", JSON.stringify(defaultSettings));
          window.settings = defaultSettings;
      }
  </script>
  
  <!-- It's called preloading lol -->
  <script type="text/javascript" charset="utf-8">
      new Image().src = "img/herta-kurukuru.gif";
      new Image().src = "monika/g1.webp";
      new Image().src = "monika/g2.webp";
      
      let gm = new Audio("monika/gm.ogg");
      gm.preload = "auto";
      gm.loop = true;
      
      let sfx = [];
      if (settings[0].kurukuru) sfx.push(new Audio("audio/kurukuru.mp3"));
      if (settings[0].kururin) sfx.push(new Audio("audio/kururin.mp3"));
      
      for (let audio of sfx) {
          audio.preload = "auto";
      }
  </script>
</head>
<body>
    <div class="loading">
        <img src="img/herta_teri.webp" alt="Herta Teri" width="80px" />
        <h2>Loading...</h2>
        <span style="display: none;">
            It seems that an error occurred while retrieving data from the database.<br />
            Please try again later.
        </span>
    </div>
    
    <div class="buttons">
        <i id="openPopup" class="bx bx-info-circle" onclick="openPopup('info');"></i>
        <i id="openPopup" class="bx bx-cog" onclick="openPopup('settings');"></i>
    </div>
    
    <div id="info" class="popup-overlay">
        <div class="popup info">
            <i id="closePopup" class="bx bx-x close" onclick="closePopup('info');"></i>
            <img src="img/herta-kurukuru.gif" alt="Herta Spinning" width="70px" />
            <h2>Kurukuru!</h2>
            <small>By <a href="https://twitter.com/AozoraDev">@AozoraDev</a></small>
            <hr />
            <div class="credits">
                <h3>Credits to</h3>
                <div class="credit">
                    <img src="img/Seseren_kr.jpg" alt="Seseren_kr" width="40px" />
                    <span>
                        <a href="https://twitter.com/Seseren_kr">@Seseren_kr</a>
                        <small>Spinning Herta gif</small>
                    </span>
                </div>
                <div class="credit">
                    <img src="img/AdimivA.jpg" alt="AdiMIV_art" width="40px" />
                    <span>
                        <a href="https://twitter.com/AdimivA">@AdimivA</a>
                        <small>Teri-style Herta image</small>
                    </span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="settings" class="popup-overlay">
        <div class="popup settings">
            <i id="closePopup" class="bx bx-x close" onclick="closePopup('settings');"></i>
            <div class="warning">
                <i class="bx bxs-error"></i>
                <span><small>(NR) means that the setting will be applied after refreshing the website</small></span>
            </div>
            <h3>Sounds</h3>
            <label>
                <input type="checkbox" name="kurukuru" id="settings0" onchange="updateSettings(this);"/>
                <span>Kurukuru (NR)</span>
            </label>
            <label>
                <input type="checkbox" name="kururin" id="settings0" onchange="updateSettings(this);"/>
                <span>Kururin  (NR)</span>
            </label>
            <br />
            <label>
                <input type="checkbox" name="randomize" id="settings0" onchange="updateSettings(this);"/>
                <span>Randomize</span>
            </label>
        </div>
    </div>
    
    <div class="container">
        <div class="data">
            <h3>Herta have been spinning</h3>
            <h1>0</h1>
            <span>0</span>
            <h3>times!</h3>
        </div>
        <!--img src="img/herta-kurukuru.gif" alt="Herta Kurukuru" width="240px" / -->
    </div>
    
    <script id="monika" src="js/monika.js"></script>
    <script src="js/index.js"></script>
</body>
</html>